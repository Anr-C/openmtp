(()=>{var e={716:(e,t,r)=>{var n={"./file-explorer.png":679,"./file-transfer.png":973};function a(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=o,e.exports=a,a.id=716},679:(e,t,r)=>{"use strict";e.exports=r.p+"bundle/file-explorer.1b1a659da61529904113.png"},973:(e,t,r)=>{"use strict";e.exports=r.p+"bundle/file-transfer.e01ae86967cd5e83a375.png"}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;r.g.importScripts&&(e=r.g.location+"");var t=r.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=e+"../"})(),(()=>{"use strict";var e=[200,403,404],t=function(e){return null==e},n={get(e){var t=e.param,r=void 0===t?"":t,n=e.url,a=void 0===n?"":n,o={};return""===a&&(a=window.location.href),a.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,t,r){o[t]=decodeURI(r)})),""===r?o:void 0===o[r]?null:o[r]},getUrlWithoutHash(e){var t=e.url,r=void 0===t?"":t;if(""!==r){var n=r.split("#")[0];return n||null}return window.location.href.split("#")[0]},getHash(e){var t=e.url,r=void 0===t?"":t;if(""!==r){var n=r.split("#")[1];return n||null}return location.hash.replace("#","").trim()},parseHash(e){var t=e.param,r=void 0===t?"":t,a=e.url,o=void 0===a?"":a,i="";""!==o&&(i=o);var l=n.getHash({url:i});if(""===l)return null;var s,c,u=l.split("&"),p={};for(s=0;s<u.length;s+=1)(c=u[s].split("=")).length<2&&c.push(""),p[decodeURIComponent(c[0])]=decodeURIComponent(c[1]);return""===r?p:void 0===p[r]?null:p[r]},removeHash(){window.location.replace("#")},getUrlPath:()=>window.location.pathname},a=function(e){return"string"==typeof e||e instanceof String};function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(new(function(){function s(){var l=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),this._checkLatestGitHubRelease=function(){return(r={url:"https://api.github.com/repos/ganeshrvel/openmtp/releases/latest"},n=r.url,fetch("".concat(n)).then((function(t){return-1!==e.indexOf(t.status)?{json:t.json(),status:t.status}:null})).catch((function(){}))).then((function(e){if(t(e))return null;var r=e.json,n=e.status;return r.then((function(e){return l.gitHubLatestReleaseData=l._generateDownloadLatestGitHubReleaseUrl(e,n),l._releaseInformationSet(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},l.gitHubLatestReleaseData))}))}));var r,n},this._generateDownloadLatestGitHubReleaseUrl=function(e,t){var r={latest:e?e.name:"OpenMTP",downloadUrls:{"mac-arm64":{desc:"Apple Silicon",url:"https://github.com/ganeshrvel/openmtp/releases/"},"mac-x64":{desc:"Intel Silicon",url:"https://github.com/ganeshrvel/openmtp/releases/"}}};return 200===t&&e&&e.assets&&e.assets.length>0&&e.assets.forEach((function(e){if(e.name.match(/\.yml|\.yaml|\.zip$/))return null;var t=e.browser_download_url.match(/mac-x64\.dmg$/),n=e.browser_download_url.match(/mac-arm64\.dmg$/);t?r.downloadUrls["mac-x64"].url=t.input:n&&(r.downloadUrls["mac-arm64"].url=n.input)})),r},this._forceDownloadLatestGitHubRelease=function(e){var r=e.platform,n=e.arch;return t(l.gitHubLatestReleaseData)?(l._checkLatestGitHubRelease().then((function(){return t(l.gitHubLatestReleaseData)?null:(window.location.href=l.gitHubLatestReleaseData.downloadUrls["".concat(r,"-").concat(n)].url,!0)})).catch((function(){})),null):l.gitHubLatestReleaseData},this._checkDownloadRequestUrl=function(){var e=n.get({}),r=e.downloadApp,a=e.release,o=e.platform,i=e.arch;return t(r)||t(i)||t(a)||t(o)?null:l._forceDownloadLatestGitHubRelease({platform:o,arch:i})?void(window.location.href=l.gitHubLatestReleaseData.downloadUrls["".concat(o,"-").concat(i)].url):null},this._appScreenshotsLazyLoad=function(){Object.keys(l.lazyLoadImages).map((function(e){var n,a,o=l.lazyLoadImages[e],i=(n=o.imgSrc,r(716)("./"+n));return(a=i,new Promise((function(e){var t=new Image;t.onload=function(){return e({src:a,status:"ok"})},t.onerror=function(){return e({src:a,status:"error"})},t.src=a}))).then((function(e){if(!e.status)return null;if(!t(o.loader)){var r=o.parentSelector.querySelector(o.loader);o.parentSelector.removeChild(r)}return l._createImg(e.src,o.parentSelector,o.id),!0})).catch((function(){}))}))},this._createImg=function(e,t,r){var n=document.createElement("img");n.src=e,n.id=r,t.appendChild(n)},this._downloadBtnEvents=function(){l.$el.downloadBtnGitHubArm64.addEventListener("click",(function(e){e.preventDefault();var t="arm64";if(!l._forceDownloadLatestGitHubRelease({platform:"mac",arch:t}))return null;window.location.href=l.gitHubLatestReleaseData.downloadUrls["".concat("mac","-").concat(t)].url})),l.$el.downloadBtnGitHubX64.addEventListener("click",(function(e){e.preventDefault();if(!l._forceDownloadLatestGitHubRelease({platform:"mac",arch:"x64"}))return null;window.location.href=l.gitHubLatestReleaseData.downloadUrls["".concat("mac","-").concat("x64")].url}))},this._navigateToGithuBtnEvents=function(){l.$el.navigateToGitHub.addEventListener("click",(function(e){e.preventDefault(),window.location.href="https://github.com/ganeshrvel/openmtp"}))},this._releaseInformationSet=function(e){for(var t=e.latest,r=(e.url,0);r<l.$el.gitHubLatestVersionWrapper.length;r+=1)l.$el.gitHubLatestVersionWrapper[r].innerHTML=t},this._setHighlightDownloadBtnColor=function(){l._isMacArm64Machine()&&function(e,t){var r;if(r=a(e)?document.querySelector(e):e){var n="";Object.keys(t).map((function(e){var r=t[e];return n+="".concat(e,":").concat(r,";"),e})),r.setAttribute("style",n)}}(l.$el.downloadBtnGitHubArm64,{"background-color":"transparent",color:"var(--fbc-blue-60)","border-color":"var(--fbc-blue-60)"})},this._isMacArm64Machine=function(){var e=document.createElement("canvas").getContext("webgl"),t=e.getExtension("WEBGL_debug_renderer_info"),r=t&&e.getParameter(t.UNMASKED_RENDERER_WEBGL)||"";return r.match(/Apple/)&&!r.match(/Apple GPU/)},this.selectors={spinner:".spinner",appScreenshotFileExplorerImageWrapper:"#app-screenshot-file-explorer-wrapper",appScreenshotFileTransferImageWrapper:"#app-screenshot-file-transfer-wrapper",appScreenshotFileExplorerId:"app-screenshot-file-explorer",appScreenshotFileTransferId:"app-screenshot-file-transfer",downloadBtnGitHubArm64:"#download-btn-github-arm64",downloadBtnGitHubX64:"#download-btn-github-x64",navigateToGitHub:"#navigate-to-github",gitHubLatestVersionWrapper:".github-latest-version-wrapper"},this.$el={appScreenshotFileExplorerImageWrapper:document.querySelector(this.selectors.appScreenshotFileExplorerImageWrapper),appScreenshotFileTransferImageWrapper:document.querySelector(this.selectors.appScreenshotFileTransferImageWrapper),downloadBtnGitHubArm64:document.querySelector(this.selectors.downloadBtnGitHubArm64),downloadBtnGitHubX64:document.querySelector(this.selectors.downloadBtnGitHubX64),navigateToGitHub:document.querySelector(this.selectors.navigateToGitHub),gitHubLatestVersionWrapper:document.querySelectorAll(this.selectors.gitHubLatestVersionWrapper)},this.gitHubLatestReleaseData=null,this.lazyLoadImages={fileExplorer:{imgSrc:"file-explorer.png",parentSelector:this.$el.appScreenshotFileExplorerImageWrapper,id:this.selectors.appScreenshotFileExplorerId,loader:this.selectors.spinner},fileTransfer:{imgSrc:"file-transfer.png",parentSelector:this.$el.appScreenshotFileTransferImageWrapper,id:this.selectors.appScreenshotFileTransferId,loader:this.selectors.spinner}}}var c,u,p;return c=s,(u=[{key:"init",value:function(){this._checkLatestGitHubRelease(),this._setHighlightDownloadBtnColor(),this._checkDownloadRequestUrl(),this._appScreenshotsLazyLoad(),this._downloadBtnEvents(),this._navigateToGithuBtnEvents()}}])&&l(c.prototype,u),p&&l(c,p),Object.defineProperty(c,"prototype",{writable:!1}),s}())).init()})()})();